<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Delta Work </title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="dwork.css">
  </head>
  <body>

    <!--nav-->
    <div class="navbar-header">
      <div class="header">
        Delta Work
        <ul class="nav nav-tabs">
          <li class="active"><a href="/index.html">Home</a></li>
          <li><a href="/whysolarpower.html">Why Solar Power</a></li>
          <li><a href="/Ourmission.html">Our Mission</a></li>
        </ul>
        <div class="subheader">
          Solar power to the people
        </div>
      </div>
    </div>

    <!--modal-->
    <div class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Find how much you could be saving with solar power</h4>
          </div>
          <div class="modal-body">

            <!--modal form-->
            <form class="form-inline" role="form">
              <div class="form-group">
                <label class="sr-only" for="Zipcode">Zipcode</label>
                <input type="Zipcode" class="form-control" id="Zipcode" placeholder="Enter zipcode">
              </div>
            </form>
            <!--end modal form-->

            <p>Zip code&hellip;</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal" onClick="renderTariff()">Enter</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div id = "tariffInHere"></div>
    
    <!-- javascript -->
    <script src="jquery-2.1.1.js"></script>
    <script src="underscore.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.2/mustache.js" ></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="dwork.js"></script>
    <script>
      function renderTariff(e) {
        var zip = $('#Zipcode').val();
        $.getJSON( "http://api.genability.com/rest/prices?appId=894a0759-f682-4760-b160-ecefba051e7b&appKey=ad02f158-8b1d-4cac-8fda-8d21c8248752&zipCode=" + zip + "&customerClasses=RESIDENTIAL&tariffTypes=DEFAULT", function(data){
          var tariffs = _.each(data.results, function(tariff) {
            tariff["roundedRate"] = tariff.rateMean.toFixed(2);
          }) ;	
          var template= $('#tariffInfo').html();
          var output = Mustache.render(template, {tariffs: tariffs});
          $('#tariffInHere').html(output);
          //math 
        });
      }
    </script>
    <script id ="tariffInfo" type="text/template">
      {{#tariffs}}
        {{roundedRate}}
      {{/tariffs}}
    </script>
  </body>
</html>
